#include <iostream>
#include <iomanip>
#include <fstream>
using namespace std;

int main()
{
  ifstream inFile;
  ofstream outFile;

  // open the input fule
  inFile.open("car.dat");

  //if the file doesnt exist

  if(!inFile) // inFile == NULL
    {

      cout << "Cannot open the input file" << endl;
    }
  else // input file exists
    {




      
      //open the output file only ifthe input file opened
      outFile.open("carout.dat");

      string model;
      int miles;
      int gallons;

        outFile << left << setw(20) << "Model Name" << setw(20) << "Miles Driven"
		<< setw(20) << "Gallons of Gas Used" <<right <<setw(20)<< "MPG" << endl;


	double MPG = 0.0;
	int TotalM = 0;
	int TotalG = 0;
	double avgMPG = 0.0;

	while( inFile >>model >> miles >> gallons)
	{
	  MPG = (1.0 * miles) / gallons;
	  TotalM += miles;
	  TotalG += gallons;
	  avgMPG = (1.0 * TotalM) / TotalG;
	  
	 
	  outFile <<fixed << setprecision(2) <<left << setw(20) << model << right << setw(20) <<miles<< right <<setw(20)<< gallons << right << setw(20) << MPG << endl;
	

	}

	 outFile << endl;
          outFile <<"Total Miles Driven: " << TotalM << " miles" <<endl;
          outFile <<"Total Gallons of Gas Used: " << TotalG << " gallons" << endl;
          outFile << "Average MPG: " << avgMPG << " miles per gallon" << endl;


	
      inFile.close();
      outFile.close();
      
    }

  return 0;


}
